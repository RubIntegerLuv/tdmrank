<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Perfil</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="perfil-content">
  <div class="perfil-container">
    <h2 class="perfil-nombre">{{ jugador?.nombre }} {{ jugador?.apellido }}</h2>

    <!-- Debajo del nombre, antes de las estadísticas -->
    <div class="perfil-paleta-edit">
      <div class="paleta-input-block">
        <label>Goma derecha</label>
        <input type="text" [(ngModel)]="jugador.gomaDerecha" />
      </div>
      <div class="paleta-input-block">
        <label>Goma revés</label>
        <input type="text" [(ngModel)]="jugador.gomaReves" />
      </div>
      <div class="paleta-input-block">
        <label>Madero</label>
        <input type="text" [(ngModel)]="jugador.madero" />
      </div>
      <div class="paleta-input-block paleta-btn-block">
        <button ion-button expand="block" (click)="guardarPaleta()">GUARDAR</button>
      </div>
    </div>

    <div class="perfil-stats-container">
      <div class="perfil-stats">
        <div class="stat-box">
          <h3>Partidos Ganados</h3>
          <p>{{ partidosGanados }}</p>
        </div>
        <div class="stat-box">
          <h3>Torneos Ganados</h3>
          <p>{{ torneosGanados }}</p>
        </div>
        <div class="stat-box">
          <h3>% de Victorias</h3>
          <p>{{ porcentajeVictorias }}%</p>
        </div>
        <div class="stat-box">
          <h3>% de Victorias en el Mes</h3>
          <p>{{ porcentajeVictoriasMes }}%</p>
        </div>
      </div>

      <!-- Historial de partidos -->
      <div class="perfil-historial">
        <h3>Historial de Partidos</h3>
        <div *ngFor="let partido of historialPartidos"
            [ngClass]="{'partido-ganado': partido.ganado, 'partido-perdido': !partido.ganado}"
            class="partido-card">
          <div class="partido-estado">
            {{ partido.ganado ? 'Ganado' : 'Perdido' }}
          </div>
          <div class="partido-detalles">
            <div><strong>Oponente:</strong> {{ partido.oponente }}</div>
            <div><strong>Sets:</strong> {{ partido.setsUsuario }} - {{ partido.setsOponente }}</div>
            <div><strong>Fecha:</strong> {{ partido.fecha | date:'dd/MM/yyyy' }}</div>
          </div>
        </div>
        <div *ngIf="historialPartidos.length === 0" class="historial-vacio">
          No hay partidos registrados.
        </div>
      </div>
    </div>

    <div class="perfil-ranking">
      <h3>Ranking</h3>
      <div class="ranking-placeholder">
        <!-- Aquí irá el ranking de jugadores -->
        <p>Próximamente podrás ver tu posición en el ranking.</p>
      </div>
    </div>
  </div>
</ion-content>
